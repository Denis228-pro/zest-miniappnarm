<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeSt - Премиум напитки</title>
    <meta name="description" content="Магазин премиальных напитков ZeSt. Энергия в каждом глотке!">
    <meta name="keywords" content="напитки, доставка, ZeSt, энергия">
    <meta name="theme-color" content="#FF5A1F">
    
    <!-- Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF5A1F'><path d='M13 2L3 14h9l-1 8 10-12h-9l1-8z'/></svg>">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="style.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <!-- Meta tags for better performance -->
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- PWA Manifest -->
</head>
<body>
    <!-- Age Verification -->
    <div id="age-verification" class="age-verification" role="dialog" aria-labelledby="age-title" aria-describedby="age-description">
        <div class="age-content">
            <div class="age-logo">
                <div class="logo-sparkle" aria-hidden="true">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                    </svg>
                </div>
                <span>ZeSt</span>
            </div>
            <h2 id="age-title">Добро пожаловать!</h2>
            <p id="age-description">Для доступа к магазину подтвердите, что вам есть 18 лет</p>
            <div class="age-buttons">
                <button id="age-confirm" class="btn-primary" aria-describedby="age-description">
                    <span class="btn-glow" aria-hidden="true"></span>
                    Мне есть 18 лет
                </button>
                <button id="age-deny" class="btn-secondary" aria-describedby="age-description">Мне нет 18 лет</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Загрузка...</p>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container hidden">
        <!-- Header -->
        <header class="header" role="banner">
            <div class="header-background" aria-hidden="true"></div>
            <div class="logo">
                <h1>ZeSt</h1>
                <span>Энергия в каждом глотке</span>
            </div>
            <div class="header-actions" role="toolbar" aria-label="Действия пользователя">
                <button class="cart-indicator" id="cart-indicator" aria-label="Корзина" aria-describedby="cart-count">
                    <span class="cart-icon" aria-hidden="true">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </span>
                    <span class="cart-count" id="cart-count" aria-live="polite">0</span>
                </button>
                <button class="wishlist-indicator" id="wishlist-indicator" aria-label="Избранное" aria-describedby="wishlist-count">
                    <span class="wishlist-icon" aria-hidden="true">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                        </svg>
                    </span>
                    <span class="wishlist-count" id="wishlist-count" aria-live="polite">0</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Catalog Page -->
            <div id="catalog-page" class="page active">
                <div class="page-header">
                    <h2>Наши напитки</h2>
                    <div class="catalog-controls">
                        <div class="search-box">
                            <label for="search-input" class="sr-only">Поиск напитков</label>
                            <input type="text" id="search-input" placeholder="Поиск напитков..." aria-label="Поиск напитков" aria-describedby="search-results-count">
                            <span class="search-icon" aria-hidden="true">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                            </span>
                        </div>
                        <div class="sort-dropdown">
                            <label for="sort-select" class="sr-only">Сортировка товаров</label>
                            <select id="sort-select" class="sort-select" aria-label="Сортировка товаров">
                                <option value="default">По умолчанию</option>
                                <option value="price_asc">Цена по возрастанию</option>
                                <option value="price_desc">Цена по убыванию</option>
                                <option value="name_asc">По названию (А-Я)</option>
                                <option value="name_desc">По названию (Я-А)</option>
                                <option value="popular">По популярности</option>
                                <option value="new">Сначала новые</option>
                                <option value="rating">По рейтингу</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="filters" role="tablist" aria-label="Фильтры по категориям">
                    <button class="filter-btn active" data-category="all" role="tab" aria-selected="true" aria-controls="products-grid">Все</button>
                    <button class="filter-btn" data-category="energy" role="tab" aria-selected="false" aria-controls="products-grid">Энергетики</button>
                    <button class="filter-btn" data-category="soft" role="tab" aria-selected="false" aria-controls="products-grid">Безалкогольные</button>
                    <button class="filter-btn" data-category="water" role="tab" aria-selected="false" aria-controls="products-grid">Вода</button>
                    <button class="filter-btn" data-category="sale" role="tab" aria-selected="false" aria-controls="products-grid">Акции</button>
                </div>
                <div id="products-grid" class="products-grid">
                    <div class="loading">Загрузка товаров...</div>
                </div>
            </div>

            <!-- ZeSt Club Page -->
            <div id="club-page" class="page">
                <!-- ... (остается без изменений) ... -->
            </div>

            <!-- Cart Page -->
            <div id="cart-page" class="page">
                <!-- ... (остается без изменений) ... -->
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="page">
                <div class="page-header">
                    <h2>Профиль</h2>
                </div>
                
                <!-- Profile Tabs -->
                <div class="profile-tabs">
                    <button class="profile-tab active" data-tab="info">Информация</button>
                    <button class="profile-tab" data-tab="orders">Заказы</button>
                    <button class="profile-tab" data-tab="wishlist">Избранное</button>
                    <button class="profile-tab" data-tab="reviews">Отзывы</button>
                </div>
                
                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Info Tab -->
                    <div id="tab-info" class="tab-pane active">
                        <div class="profile-header">
                            <div class="user-avatar" id="user-avatar">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                            </div>
                            <div class="user-info">
                                <h2 id="profile-name">Не указано</h2>
                                <p id="profile-phone">Не указан</p>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>Личная информация</h3>
                            <div class="info-item">
                                <span class="info-label">Имя:</span>
                                <span class="info-value" id="profile-name">Не указано</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Телефон:</span>
                                <span class="info-value" id="profile-phone">Не указан</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Username:</span>
                                <span class="info-value" id="profile-username">Не указан</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">ID:</span>
                                <span class="info-value" id="profile-id">Не доступен</span>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h3>ZeSt Club</h3>
                            <div class="club-info">
                                <span>Статус подписки:</span>
                                <span class="club-status-badge inactive" id="profile-club-status">
                                    <span class="status-icon">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                        </svg>
                                    </span>
                                    <span class="status-text">Неактивна</span>
                                </span>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <div id="auth-section">
                                <button class="btn-telegram" id="telegram-auth">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.13-.31-1.09-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                                    </svg>
                                    Войти через Telegram
                                </button>
                            </div>
                            <div id="profile-content" class="hidden">
                                <button class="btn-secondary" id="logout-btn">Выйти</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Orders Tab -->
                    <div id="tab-orders" class="tab-pane">
                        <div class="profile-section">
                            <h3>История заказов</h3>
                            <div id="orders-list">
                                <div class="empty-state">
                                    <span class="empty-icon">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                                        </svg>
                                    </span>
                                    <p>У вас пока нет заказов</p>
                                    <button class="btn-secondary go-to-catalog">Перейти в каталог</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Wishlist Tab -->
                    <div id="tab-wishlist" class="tab-pane">
                        <div class="profile-section">
                            <h3>Избранное</h3>
                            <div id="wishlist-items" class="wishlist-items">
                                <div class="empty-state">
                                    <span class="empty-icon">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                                        </svg>
                                    </span>
                                    <p>В вашем списке желаний пока пусто</p>
                                    <button class="btn-secondary go-to-catalog">Перейти в каталог</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reviews Tab -->
                    <div id="tab-reviews" class="tab-pane">
                        <div class="profile-section">
                            <h3>Мои отзывы</h3>
                            <div id="reviews-list" class="reviews-list">
                                <div class="empty-state">
                                    <span class="empty-icon">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                        </svg>
                                    </span>
                                    <p>У вас пока нет отзывов</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-navigation">
            <div class="nav-background"></div>
            <button class="nav-btn active" data-page="catalog">
                <span class="nav-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/>
                        <line x1="7" y1="7" x2="7.01" y2="7"/>
                    </svg>
                </span>
                <span class="nav-text">Каталог</span>
            </button>
            <button class="nav-btn" data-page="club">
                <span class="nav-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                </span>
                <span class="nav-text">ZeSt Club</span>
            </button>
            <button class="nav-btn" data-page="cart">
                <span class="nav-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                </span>
                <span class="nav-text">Корзина</span>
                <span class="nav-badge" id="bottom-cart-count">0</span>
            </button>
            <button class="nav-btn" data-page="profile">
                <span class="nav-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </span>
                <span class="nav-text">Профиль</span>
            </button>
        </nav>
    </div>

    <!-- Product Modal (оставляем только основное модальное окно) -->
    <div id="product-modal" class="modal hidden">
        <div class="modal-background"></div>
        <div class="modal-content">
            <button id="close-modal" class="close-btn" aria-label="Закрыть">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
            <div id="modal-product-content"></div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="script.js"></script>
</body>
</html>